# https://docs.python.org/3/library/collections.abc.html
# https://docs.python.org/3/library/collections.html
# https://docs.python.org/3/library/heapq.html
# https://grantjenks.com/docs/sortedcontainers/

"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.1 å°†åºåˆ—åˆ†è§£ä¸ºå•ç‹¬å˜é‡ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é€‚ç”¨å¯¹è±¡ : æ‰€æœ‰å¯è¿­ä»£å¯¹è±¡ (å…ƒç»„ / åˆ—è¡¨ / å­—ç¬¦ä¸² / æ–‡ä»¶å¯¹è±¡ / è¿­ä»£å™¨ / ç”Ÿæˆå™¨ â€¦)
â­ æ•°é‡åŒ¹é… : å˜é‡æ•°é‡å¿…é¡»ä¸åºåˆ—å…ƒç´ æ•°é‡ä¸€è‡´ï¼Œå¦åˆ™æŠ› ValueError
â­ ç»“æ„åŒ¹é… : æ”¯æŒåµŒå¥—ç»“æ„è§£åŒ…ï¼Œä¾‹å¦‚ (year, mon, day) = date_tuple
â­ å ä½ç¬¦   : ä½¿ç”¨ä¸‹åˆ’çº¿ _ å¿½ç•¥ä¸éœ€è¦çš„å€¼
â­ éƒ¨åˆ†è§£åŒ… : Python æ— ä¸“é—¨è¯­æ³•ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªå…ƒç´ æä¾›å˜é‡å (æˆ–å ä½ç¬¦)
â™»ï¸ å¯è¿­ä»£åˆ¤å®š : å¯¹è±¡åªéœ€å®ç° __iter__() å³è§†ä½œ Iterable
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¸‡ç‰©çš†å¯¹è±¡  Everything is an Object (identity / type / value)
ğŸ”¥ğŸ”¥ğŸ”¥ Python è¿è¡ŒæœŸæŠŠä»»ä½•ä¸œè¥¿ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å‡½æ•°ã€ç±»ã€æ¨¡å—ã€None â€¦ï¼‰éƒ½è§†ä½œ object çš„ä¸€ä¸ªå®ä¾‹
æ¯ä¸ªå¯¹è±¡è‡ªå¸¦ä¸‰å—æ ¸å¿ƒå…ƒä¿¡æ¯
â­ identity  â€” id(obj) è¿”å›çš„æ•´æ•°ï¼Œé€šå¸¸æ˜ å°„åˆ°å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼›åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜
â­ type â€” type(obj) è¿”å›å¯¹è±¡æ‰€å±çš„ classï¼Œå†³å®šå®ƒæ”¯æŒå“ªäº›æ“ä½œã€æ–¹æ³•ä¸è¿ç®—ç¬¦
â­ value  â€” å¯¹è±¡å­˜å‚¨çš„æ•°æ®æœ¬ä½“
   - ä¸å¯å˜å¯¹è±¡ (int, str, tuple, frozenset â€¦) ä¸€æ—¦åˆ›å»ºå…¶å€¼ä¸å¯ä¿®æ”¹ï¼›â€œä¿®æ”¹â€ ä¼šå¾—åˆ°æ–°å¯¹è±¡ï¼Œèº«ä»½æ”¹å˜
   - å¯å˜å¯¹è±¡ (list, dict, set, bytearray â€¦) å¯åœ¨åŸèº«ä»½ä¸ŠåŸåœ°ä¿®æ”¹å…¶å€¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
# åŸºæœ¬è§£åŒ…
x, y = (4, 5)
# åˆ—è¡¨ + åµŒå¥—å…ƒç»„
data = ['ACME', 50, 91.1, (2012, 12, 21)]
name, shares, price, (year, mon, day) = data  # åµŒå¥—è§£åŒ…
# ä½¿ç”¨å ä½ç¬¦ _ å¿½ç•¥ä¸éœ€è¦çš„å€¼
_, shares, price, _ = data
# âŒ è§£åŒ…æ•°é‡ä¸åŒ¹é…ç¤ºä¾‹ (æŠ› ValueError)
try:
    a, b, c = (1, 2)
except ValueError as err:
    print("ValueError:", err)


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.2 è§£å‹å¯è¿­ä»£å¯¹è±¡èµ‹å€¼ç»™å¤šä¸ªå˜é‡ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é€‚ç”¨åœºæ™¯ : å½“å¯è¿­ä»£å¯¹è±¡å…ƒç´ å¤šäºå˜é‡æ—¶ï¼Œç”¨ *var æ¥æ”¶å‰©ä½™å…ƒç´ 
â­ æ”¶é›†ç±»å‹ : *var æ°¸è¿œæ˜¯ listï¼ˆå³ä¾¿ä¸ºç©ºï¼‰
â­ ä½ç½®çµæ´» : *var å¯åœ¨å¼€å¤´ã€ä¸­é—´ã€ç»“å°¾ï¼ˆ*head, last / first, *mid, last / first, *tailï¼‰
â­ å ä½ç¬¦   : è‹¥ä»…æƒ³ä¸¢å¼ƒä½™ä¸‹å…ƒç´ ï¼Œç”¨ *_ æˆ–å…¶ä»–å ä½å
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
def drop_first_last(grades):                     # grades = [10, 9, 8, 7, 6]
    first, *middle, last = grades
    return sum(middle) / len(middle)             # â†’ 8.0

record = ('Dave', 'dave@example.com', '773-555-1212', '847-555-1212')
name, email, *phones = record  # name='Dave', email='dave@example.com', phones=['773-555-1212','847-555-1212']
line = 'nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false'
uname, *_, homedir, shell = line.split(':')       # uname='nobody', homedir='/var/empty', shell='/usr/bin/false'


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.3 ä¿ç•™æœ€å N ä¸ªå…ƒç´  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : è¿­ä»£æˆ–å…¶ä»–æ“ä½œä¸­ï¼Œä»…éœ€ä¿ç•™æœ€è¿‘ N æ¡è®°å½•
â­ è§£å†³æ–¹æ¡ˆ : ä½¿ç”¨ collections.deque(maxlen=N) è‡ªåŠ¨ä¸¢å¼ƒæœ€è€å…ƒç´ 
â­ ç‰¹ç‚¹     : append æ“ä½œ O(1)ï¼Œæ»¡æ—¶è‡ªåŠ¨å‰”é™¤é˜Ÿé¦–ï¼›appendleft, pop, popleft åŒæ ·é«˜æ•ˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ å®¹å™¨ (Container)
   â€¢ å®šä¹‰ : å®ç° __contains__(self, item) æˆ–æ”¯æŒ in è¿ç®—çš„å¯¹è±¡ï¼Œå¯å­˜æ”¾å…¶ä»–å¯¹è±¡çš„ç›’å­
   â€¢ å…¸å‹ : list, tuple, set, dict, str, deque, è‡ªå®šä¹‰ç±»å®ç° __iter__/__len__/__contains__ äº¦å¯è§†ä¸ºå®¹å™¨
   â€¢ ç‰¹æ€§ : å¯é…åˆ len(), in, è¿­ä»£ç­‰æ“ä½œ; å¤šæ•°å®¹å™¨åŒæ ·æ˜¯ Iterable / Collection
â­ ç”Ÿæˆå™¨ (Generator)
   â€¢ å®šä¹‰ : å«æœ‰ yield çš„å‡½æ•°è°ƒç”¨ç»“æœï¼Œè¿”å›ä¸€ä¸ªå»¶è¿Ÿè®¡ç®—çš„è¿­ä»£å™¨ï¼›æˆ– (expr for x in iterable) æ¨å¯¼å¼äº§ç”Ÿ
   â€¢ åè®® : åŒæ—¶å®ç° __iter__() å’Œ __next__()ï¼Œæ¯æ¬¡ next() äº§å‡ºä¸€ä¸ªå€¼ï¼Œç›´è‡³æŠ› StopIteration
   â€¢ ä¼˜åŠ¿ : æƒ°æ€§ã€èŠ‚çœå†…å­˜ï¼Œå¯æ— é™åºåˆ—æˆ–å¤§æ•°æ®æµ; å¯é…åˆ send() /throw() /close() åšåç¨‹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
def search(lines: Iterable[str], pattern: str, history: int = 3) -> Generator[Tuple[str, List[str]], None, None]:
    prev: deque[str] = deque(maxlen=history)
    for line in lines:
        if pattern in line:
            yield line, list(prev)
        prev.append(line)

logs = ['a','python error','b','c','python ok','d']
for match, prev in search(logs, 'python', history=2):
    print(match, prev)                          # â†’ 'python error', ['a']
                                                # â†’ 'python ok', ['b', 'c']


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.4 æŸ¥æ‰¾æœ€å¤§æˆ–æœ€å°çš„ N ä¸ªå…ƒç´  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ åœºæ™¯     : ä»åºåˆ—æˆ–å¯è¿­ä»£å¯¹è±¡ä¸­å¿«é€Ÿè·å¾—æœ€å¤§ / æœ€å°çš„å‰ N ä¸ªå…ƒç´ 
â­ æ ¸å¿ƒ API : heapq.nlargest(N, data, key=...) / heapq.nsmallest(...)
â­ æ€§èƒ½ä¼˜åŠ¿ : å½“ N â‰ª æ•°æ®é‡æ—¶ï¼Œå¤æ‚åº¦ ~ O(len(data) Â· log N)ï¼Œä¼˜äºæ•´ä½“æ’åº
â€¢ N == 1          â†’ ç›´æ¥ç”¨ min() / max() æ›´å¿«
â€¢ N æ¥è¿‘æ•°æ®é‡     â†’ ç›´æ¥æ’åºååˆ‡ç‰‡; sorted(data)[:N] / [-N:]
â€¢ N è¿œå°äºæ•°æ®é‡   â†’ heapq.nlargest/nsmallest ä¼˜åŠ¿æœ€å¤§
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¸¸ç”¨å †æ“ä½œ APIï¼ˆheapq æ¨¡å—ï¼‰
â­ heapq.heapify(seq)
   â€¢ å°†ä»»æ„åºåˆ—åŸåœ°è½¬æˆæœ€å°å †ï¼›æ—¶é—´å¤æ‚åº¦ O(len(seq))
â­ heapq.heappush(heap, item)
   â€¢ å‘å †æ’å…¥æ–°å…ƒç´ å¹¶ä¿æŒå †æ€§è´¨
â­ heapq.heappop(heap)
   â€¢ å¼¹å‡ºå¹¶è¿”å›æœ€å°å…ƒç´ ï¼ˆå †é¡¶ï¼‰
â­ heapq.heappushpop(heap, item)
   â€¢ å…ˆ push å† popï¼Œä½†åªåšä¸€æ¬¡å¹³è¡¡ï¼›æ¯”å…ˆ push å† pop æ›´å¿«
â­ heapq.heapreplace(heap, item)
   â€¢ å…ˆ pop æœ€å°å…ƒç´ ï¼Œå† push æ–°å…ƒç´ ï¼›ä¸ heappushpop ä½œç”¨ç›¸å
â­ heapq.merge(*iterables)
   â€¢ å¤šä¸ªå·²æ’åºè¾“å…¥æŒ‰é¡ºåºåˆå¹¶ç”Ÿæˆå™¨ï¼ŒèŠ‚çœå†…å­˜ï¼›é€‚åˆå¤–æ’åº
â© è®°å¿†è¦ç‚¹ï¼šheap[0] æ°¸è¿œæ˜¯æœ€å°å€¼ï¼Œæ‰€æœ‰æ“ä½œéƒ½å›´ç»•ç»´æŠ¤è¿™ä¸€ä¸å˜å¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
nums = [1, 8, 2, 23, 7, -4, 18, 23, 42, 37, 2]
heapq.nlargest(3, nums)   # â†’ [42, 37, 23]
heapq.nsmallest(3, nums)  # â†’ [-4, 1, 2]
portfolio = [
    {'name': 'IBM',  'shares': 100, 'price': 91.1},
    {'name': 'AAPL', 'shares': 50,  'price': 543.22},
    {'name': 'FB',   'shares': 200, 'price': 21.09},
    {'name': 'HPQ',  'shares': 35,  'price': 31.75},
    {'name': 'YHOO', 'shares': 45,  'price': 16.35},
    {'name': 'ACME', 'shares': 75,  'price': 115.65},
]
cheap      = heapq.nsmallest(3, portfolio, key=lambda s: s['price'])
expensive  = heapq.nlargest(3,  portfolio, key=lambda s: s['price'])


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.5 å®ç°ä¸€ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ— (Priority Queue) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ åœºæ™¯     : éœ€è¦æŒ‰ä¼˜å…ˆçº§ï¼ˆæƒé‡ï¼‰ä¾æ¬¡å–å…ƒç´ ï¼Œæœ€é«˜ä¼˜å…ˆçº§å…ˆå‡ºé˜Ÿ
â­ æ•°æ®ç»“æ„ : heapq + å…ƒç»„ (-priority, index, item) å½¢æˆç¨³å®šçš„æœ€å¤§å †
â­ å¤æ‚åº¦   : push / pop å‡ä¸º O(logâ€†n)ï¼Œé€‚åˆæµ·é‡æ•°æ®
â­ index   : é¿å…åŒä¼˜å…ˆçº§å…ƒç´ ä¸å¯æ¯”è¾ƒï¼Œå¹¶ç¡®ä¿ FIFO é¡ºåº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
class PriorityQueue:
    """æœ€å¤§å †ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæ”¯æŒåŒä¼˜å…ˆçº§ FIFOã€‚"""
    def __init__(self):
        self._queue: list[tuple[int, int, object]] = []  # (-priority, index, item)
        self._index: int = 0

    def push(self, item, priority: int) -> None:
        # -priority â†” æœ€å¤§å †ï¼›index ä¿è¯åŒä¼˜å…ˆçº§æŒ‰æ’å…¥é¡ºåº (ç¨³å®š)
        heapq.heappush(self._queue, (-priority, self._index, item))
        self._index += 1

    def pop(self):
        """å¼¹å‡ºä¼˜å…ˆçº§æœ€é«˜ä¸”æœ€æ—©æ’å…¥çš„å…ƒç´ """
        return heapq.heappop(self._queue)[-1]


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.6 å­—å…¸ä¸­çš„é”®æ˜ å°„å¤šä¸ªå€¼ (Multiâ€‘Dict) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ åœºæ™¯     : éœ€è¦è®©åŒä¸€ä¸ªé”®å…³è”å¤šä¸ªå€¼ï¼ˆå¦‚æ—¥å¿—å½’ç±»ã€å€’æ’ç´¢å¼•ï¼‰
â­ æ¨èåšæ³• : collections.defaultdict( list / set ) â€”â€” è‡ªåŠ¨åˆå§‹åŒ–å®¹å™¨
â­ ä½•æ—¶ç”¨å“ªç§å®¹å™¨
   â€¢ list  â†’ ä¿ç•™æ’å…¥é¡ºåºï¼Œå…è®¸é‡å¤
   â€¢ set   â†’ å»é‡ä¸”ä¸å…³å¿ƒé¡ºåº
"""
list_map: defaultdict[str, list[int]] = defaultdict(list)
list_map['a'].append(1)
list_map['a'].append(2)
list_map['b'].append(4)
# list_map == {'a': [1, 2], 'b': [4]}

set_map: defaultdict[str, set[int]] = defaultdict(set)
set_map['a'].add(1)
set_map['a'].add(2)
set_map['a'].add(2)  # é‡å¤è¢«å¿½ç•¥
set_map['b'].add(4)
# set_map == {'a': {1, 2}, 'b': {4}}


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.7 å­—å…¸æ’åº (OrderedDict) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ åœºæ™¯     : æ„å»ºå°†æ¥éœ€è¦ä¿æŒé”®æ’å…¥é¡ºåºçš„æ˜ å°„ï¼ˆè¿­ä»£/åºåˆ—åŒ–æ—¶ç¨³å®šé¡ºåºï¼‰
â­ æ•°æ®ç»“æ„ :  collections.OrderedDict â€”â€” åŸºäºåŒå‘é“¾è¡¨ç»´æŠ¤æ’å…¥é¡ºåºã€‚
â­ å¤æ‚åº¦   : ä¸æ™®é€š dict ç›¸å½“ï¼Œå†…å­˜å¼€é”€ç•¥é«˜ï¼ˆé¢å¤–é“¾è¡¨æŒ‡é’ˆï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
d = OrderedDict()        # æ’å…¥æ–°é”®æ—¶ç½®äºæœ«å°¾ï¼›å¯¹å·²æœ‰é”®èµ‹å€¼ä¸æ”¹å˜é¡ºåº
d['foo'] = 1
d['bar'] = 2
d['spam'] = 3
d['grok'] = 4
for key in d:
    print(key, d[key])   # foo 1  bar 2  spam 3  grok 4
json.dumps(d)            # {"foo": 1, "bar": 2, "spam": 3, "grok": 4}


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.8 å­—å…¸çš„è¿ç®— (Dict Computations) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : åœ¨å­—å…¸ä¸­è¿›è¡Œæœ€å°/æœ€å¤§å€¼æŸ¥æ‰¾ä¸æ’åºï¼ŒåŒæ—¶è·å–å¯¹åº”çš„é”®å’Œå€¼
â­ æ ¸å¿ƒæŠ€æœ¯ : åˆ©ç”¨ zip() äº¤æ¢ (value, key) æˆ–ä½¿ç”¨ min()/max() çš„ key å‚æ•°
â­ æ ¸å¿ƒæŠ€å·§ : zip(dict.values(), dict.keys()) åè½¬ä¸º (å€¼, é”®) å…ƒç»„
â­ åŸç†     : å…ƒç»„æ¯”è¾ƒæ—¶å…ˆæ¯”å€¼å†æ¯”é”®ï¼›zip() è¿”å›è¿­ä»£å™¨åªèƒ½ç”¨ä¸€æ¬¡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
prices = {'ACME': 45.23, 'AAPL': 612.78, 'IBM': 205.55, 'HPQ': 37.20, 'FB': 10.75}
min_val_key = min(zip(prices.values(), prices.keys()))  # â†’ (10.75, 'FB')
max_val_key = max(zip(prices.values(), prices.keys()))  # â†’ (612.78, 'AAPL')
# æ’åºæ‰€æœ‰é¡¹
sorted_by_price = sorted(zip(prices.values(), prices.keys()))  # â†’ [(10.75,'FB'), (37.2,'HPQ'), ...]
# ä½¿ç”¨ key å‚æ•°ç›´æ¥åœ¨é”®ä¸ŠæŸ¥æ‰¾
min_key = min(prices, key=lambda k: prices[k])          # â†’ 'FB'
max_key = max(prices, key=lambda k: prices[k])          # â†’ 'AAPL'
min_value = prices[min_key]                             # â†’ 10.75


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.9 æŸ¥æ‰¾ä¸¤å­—å…¸çš„ç›¸åŒç‚¹ (Dict Comparisons) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æŸ¥æ‰¾ä¸¤ä¸ªå­—å…¸çš„å…±åŒé”®ã€å…±åŒå€¼å¯¹ã€å·®å¼‚ç­‰
â­ æ ¸å¿ƒæŠ€æœ¯ : å­—å…¸çš„ keys() å’Œ items() è¿”å›çš„è§†å›¾å¯¹è±¡ç›´æ¥æ”¯æŒé›†åˆæ“ä½œï¼ˆäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰ï¼‰ï¼Œæ— éœ€è½¬æ¢ä¸º set
â­ æ³¨æ„     : values() ä¸æ”¯æŒé›†åˆæ“ä½œï¼ˆå€¼å¯èƒ½é‡å¤ï¼‰
â­ è§†å›¾å¯¹è±¡ç‰¹æ€§: è§†å›¾å¯¹è±¡æ˜¯å­—å…¸çš„ã€ŒåŠ¨æ€çª—å£ã€ï¼Œæ°¸è¿œæ˜ å°„å­—å…¸å½“å‰çŠ¶æ€
  - åŠ¨æ€æ€§: æŒæœ‰åŸå­—å…¸å¼±å¼•ç”¨ï¼Œå®æ—¶åæ˜ å­—å…¸æœ€æ–°çŠ¶æ€ï¼Œä»»ä½•ä¿®æ”¹ç«‹å³å¯è§
  - æƒ°æ€§è®¡ç®—: ä¸ç¼“å­˜æ•°æ®ï¼Œæ¯æ¬¡æ“ä½œéƒ½ç›´æ¥è®¿é—®åŸå­—å…¸ï¼ˆlen/iter/containsï¼‰
  - è½»é‡çº§: åªæ˜¯åŒ…è£…å¯¹è±¡ï¼Œä¸å¤åˆ¶æ•°æ®ï¼Œå†…å­˜å¼€é”€æå°
  - åªè¯»æ¥å£: ä¸èƒ½é€šè¿‡è§†å›¾ä¿®æ”¹å­—å…¸ï¼Œåªèƒ½é€šè¿‡åŸå­—å…¸ä¿®æ”¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
a = {'x': 1, 'y': 2, 'z': 3}
b = {'w': 10, 'x': 11, 'y': 2}
common_keys = a.keys() & b.keys()            # â†’ {'x', 'y'}
unique_in_a = a.keys() - b.keys()            # â†’ {'z'}
common_items = a.items() & b.items()         # â†’ {('y', 2)}
c = {key: a[key] for key in a.keys() - {'z', 'w'}}  # â†’ {'x': 1, 'y': 2}


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.10 åˆ é™¤åºåˆ—ç›¸åŒå…ƒç´ å¹¶ä¿æŒé¡ºåº (Dedupe with Order) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : å»é™¤åºåˆ—ä¸­çš„é‡å¤å…ƒç´ ï¼ŒåŒæ—¶ä¿æŒåŸå§‹é¡ºåº
â­ æ ¸å¿ƒæŠ€æœ¯ : ä½¿ç”¨ set è®°å½•å·²è§å…ƒç´  + ç”Ÿæˆå™¨æƒ°æ€§è¿”å›
  - set æä¾› O(1) çš„æŸ¥é‡æ€§èƒ½
  - ç”Ÿæˆå™¨é¿å…åˆ›å»ºæ–°åˆ—è¡¨ï¼ŒèŠ‚çœå†…å­˜
  - key å‡½æ•°å¤„ç†ä¸å¯å“ˆå¸Œç±»å‹ï¼ˆå¦‚ dictï¼‰
â­ å¯¹æ¯”     : set(items) ä¼šå»é‡ä½†ç ´åé¡ºåºï¼Œæœ¬æ–¹æ¡ˆä¿æŒé¡ºåº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ ä»€ä¹ˆæ˜¯å¯å“ˆå¸Œ
  - å¯å“ˆå¸Œå¯¹è±¡å¿…é¡»æœ‰ __hash__() æ–¹æ³•ï¼Œè¿”å›æ•´æ•°å“ˆå¸Œå€¼
  - ç”Ÿå‘½å‘¨æœŸå†…å“ˆå¸Œå€¼ä¸å˜ï¼Œä¸”ç›¸ç­‰çš„å¯¹è±¡å“ˆå¸Œå€¼å¿…é¡»ç›¸åŒ
  - å¯ä½œä¸º dict çš„é”®æˆ– set çš„å…ƒç´ 
â­ ä¸ºä»€ä¹ˆå¯å˜ç±»å‹ä¸å¯å“ˆå¸Œ
  - å¦‚æœå¯¹è±¡å†…å®¹æ”¹å˜ï¼Œå“ˆå¸Œå€¼ä¹Ÿåº”è¯¥æ”¹å˜
  - ä½†è¿™ä¼šç ´å dict/set çš„å†…éƒ¨ç»“æ„ï¼ˆåŸºäºå“ˆå¸Œè¡¨ï¼‰
  - æ‰€ä»¥ Python ç¦æ­¢å¯å˜ç±»å‹ä½œä¸º dict é”®æˆ– set å…ƒç´ 
â­ å¯å“ˆå¸Œ vs ä¸å¯å“ˆå¸Œï¼š
  - hashable: int, float, str, tuple, frozenset, bool, None
  - unhashable: list, dict, set, bytearrayï¼ˆæ‰€æœ‰å¯å˜ç±»å‹ï¼‰
  - è§„åˆ™: ä¸å¯å˜ç±»å‹é€šå¸¸å¯å“ˆå¸Œï¼Œå¯å˜ç±»å‹ä¸å¯å“ˆå¸Œ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
def dedupe(items, key=None):
   seen = set()
   for item in items:
       val = item if key is None else key(item)
       if val not in seen:
           yield item
           seen.add(val)

a = [{'x':1, 'y':2}, {'x':1, 'y':3}, {'x':1, 'y':2}, {'x':2, 'y':4}]
list(dedupe(a, key=lambda d: (d['x'],d['y'])))
list(dedupe(a, key=lambda d: d['x']))


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.11 å‘½ååˆ‡ç‰‡ (Named Slices) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : ä»£ç ä¸­å­˜åœ¨å¤§é‡ç¡¬ç¼–ç åˆ‡ç‰‡ä¸‹æ ‡ï¼Œé™ä½å¯è¯»æ€§
â­ æ ¸å¿ƒæŠ€æœ¯ : ä½¿ç”¨ slice() åˆ›å»ºå‘½ååˆ‡ç‰‡å¯¹è±¡
  - æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
  - åˆ‡ç‰‡å¯¹è±¡å¯é‡ç”¨
  - æ”¯æŒæ‰€æœ‰åˆ‡ç‰‡æ“ä½œï¼ˆè¯»å–ã€èµ‹å€¼ã€åˆ é™¤ï¼‰
â­ é«˜çº§ç‰¹æ€§ : indices(size) æ–¹æ³•è‡ªåŠ¨è°ƒæ•´è¾¹ç•Œï¼Œé¿å… IndexError
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
record = '....................100 .......513.25 ..........'
SHARES = slice(20, 23)
PRICE = slice(31, 37)
cost = int(record[SHARES]) * float(record[PRICE])

a = slice(2, 4)
items[a] = [10,11]  # ç­‰ä»·äº items[2:4] = [10,11]

# indices() é¿å…è¶Šç•Œ
a = slice(5, 50, 2)
a.indices(10)  # â†’ (5, 10, 2)


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.12 åºåˆ—ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´  (Most Common Elements) â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ‰¾å‡ºåºåˆ—ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ 
â­ æ ¸å¿ƒæŠ€æœ¯ : collections.Counter ç±»
  - Counter(iterable) åˆ›å»ºè®¡æ•°å™¨
  - most_common(n) è¿”å›å‡ºç°é¢‘ç‡æœ€é«˜çš„ n ä¸ªå…ƒç´ 
  - update() æ‰¹é‡æ›´æ–°è®¡æ•°
â­ é«˜çº§ç‰¹æ€§ : æ”¯æŒæ•°å­¦è¿ç®— +  -  &  |
â­ æ¯”è¾ƒè¿ç®—ç¬¦ï¼š
  == / != : åˆ¤æ–­ä¸¤ä¸ªè®¡æ•°å™¨åœ¨ã€Œæ­£è®¡æ•°å…ƒç´ ã€ä¸Šçš„è®¡æ•°æ˜¯å¦å®Œå…¨ä¸€è‡´ã€‚ç­‰ä»·äº dict(c1) == dict(c2)ï¼ˆè‡ªåŠ¨å¿½ç•¥è®¡æ•°â‰¤0çš„å…ƒç´ ï¼‰
  < / <=  : åˆ¤æ–­çœŸå­é›†/å­é›†å…³ç³»  all(c1[x] <= c2[x] for x in c1âˆªc2) ;  < è¿˜éœ€è‡³å°‘ä¸€ä¸ªå…ƒç´ ä¸¥æ ¼å°äº
  > / >=  : åˆ¤æ–­çœŸè¶…é›†/è¶…é›†å…³ç³»  all(c1[x] >= c2[x] for x in c1âˆªc2);  è¿˜éœ€è‡³å°‘ä¸€ä¸ªå…ƒç´ ä¸¥æ ¼å¤§äº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
words = [
    'look', 'into', 'my', 'eyes', 'look', 'into', 'my', 'eyes',
    'the', 'eyes', 'the', 'eyes', 'the', 'eyes', 'not', 'around', 'the',
    'eyes', "don't", 'look', 'around', 'the', 'eyes', 'look', 'into',
    'my', 'eyes', "you're", 'under'
]
word_counts = Counter(words)
top_three = word_counts.most_common(3)  # â†’ [('eyes', 8), ('the', 5), ('look', 4)]

# è®¿é—®è®¡æ•°
word_counts['eyes']  # â†’ 8

# æ›´æ–°è®¡æ•°
word_counts['new'] += 1
word_counts.update(['more', 'words'])

# æ•°å­¦è¿ç®—
a = Counter(words1)
b = Counter(words2)
c = a + b  # åˆå¹¶è®¡æ•°
d = a - b  # å·®é›†è®¡æ•°
e = a & b  # äº¤é›†ï¼ˆå–æœ€å°ï¼‰
f = a | b  # å¹¶é›†ï¼ˆå–æœ€å¤§ï¼‰


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.13 é€šè¿‡æŸä¸ªå…³é”®å­—æ’åºå­—å…¸åˆ—è¡¨ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ ¹æ®å­—å…¸çš„æŸä¸ªæˆ–æŸå‡ ä¸ªå­—æ®µæ’åºå­—å…¸åˆ—è¡¨
â­ æ ¸å¿ƒæŠ€æœ¯ : operator.itemgetter()
 - itemgetter('key') åˆ›å»ºè·å–å•ä¸ªé”®çš„å‡½æ•°
 - itemgetter('key1', 'key2') åˆ›å»ºè·å–å¤šä¸ªé”®çš„å‡½æ•°
 - æ¯” lambda è¡¨è¾¾å¼æ›´å¿«
â­ é€‚ç”¨åœºæ™¯ : sorted(), min(), max() ç­‰éœ€è¦ key å‡½æ•°çš„åœºåˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
rows = [
   {'fname': 'Brian', 'lname': 'Jones', 'uid': 1003},
   {'fname': 'David', 'lname': 'Beazley', 'uid': 1002},
   {'fname': 'John', 'lname': 'Cleese', 'uid': 1001},
   {'fname': 'Big', 'lname': 'Jones', 'uid': 1004}
]

rows_by_fname = sorted(rows, key=itemgetter('fname'))
rows_by_uid = sorted(rows, key=itemgetter('uid'))
rows_by_lfname = sorted(rows, key=itemgetter('lname', 'fname'))

# ç”¨äº min/max
min_uid = min(rows, key=itemgetter('uid'))  # uid æœ€å°çš„è®°å½•
max_uid = max(rows, key=itemgetter('uid'))  # uid æœ€å¤§çš„è®°å½•

# lambda æ›¿ä»£æ–¹æ¡ˆï¼ˆç¨æ…¢ï¼‰
rows_by_fname_lambda = sorted(rows, key=lambda r: r['fname'])
rows_by_lfname_lambda = sorted(rows, key=lambda r: (r['lname'], r['fname']))


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.14 æ’åºä¸æ”¯æŒåŸç”Ÿæ¯”è¾ƒçš„å¯¹è±¡ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ’åºæ²¡æœ‰å®ç°æ¯”è¾ƒæ–¹æ³•çš„è‡ªå®šä¹‰å¯¹è±¡
â­ æ ¸å¿ƒæŠ€æœ¯ : operator.attrgetter()
 - attrgetter('attr') åˆ›å»ºè·å–å•ä¸ªå±æ€§çš„å‡½æ•°
 - attrgetter('attr1', 'attr2') åˆ›å»ºè·å–å¤šä¸ªå±æ€§çš„å‡½æ•°
 - æ¯” lambda è¡¨è¾¾å¼æ›´å¿«
â­ é€‚ç”¨åœºæ™¯ : sorted(), min(), max() ç­‰éœ€è¦ key å‡½æ•°çš„åœºåˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
class User:
   def __init__(self, user_id, first_name='', last_name=''):
       self.user_id = user_id
       self.first_name = first_name
       self.last_name = last_name
   
   def __repr__(self):
       return f'User({self.user_id})'

users = [User(23), User(3), User(99)]
sorted_by_name = sorted(users, key=attrgetter('last_name', 'first_name'))

# ç”¨äº min/max
min_user = min(users, key=attrgetter('user_id'))  # user_id æœ€å°çš„å¯¹è±¡
max_user = max(users, key=attrgetter('user_id'))  # user_id æœ€å¤§çš„å¯¹è±¡
sorted_by_name_lambda = sorted(users, key=lambda u: (u.last_name, u.first_name))


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.15 é€šè¿‡æŸä¸ªå­—æ®µå°†è®°å½•åˆ†ç»„ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ ¹æ®æŸä¸ªå­—æ®µå¯¹å­—å…¸æˆ–å¯¹è±¡åºåˆ—è¿›è¡Œåˆ†ç»„è¿­ä»£
â­ æ ¸å¿ƒæŠ€æœ¯ : itertools.groupby()
 - å¿…é¡»å…ˆæ’åº: groupbyåªæ£€æŸ¥è¿ç»­ç›¸åŒçš„å…ƒç´ 
 - è¿”å› (key, group_iterator) å…ƒç»„
 - group_iterator æ˜¯ä¸€æ¬¡æ€§è¿­ä»£å™¨
â­ æ›¿ä»£æ–¹æ¡ˆ : defaultdict(list) æ„å»ºå¤šå€¼å­—å…¸ï¼ˆæ— éœ€æ’åºï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
rows = [
   {'address': '5412 N CLARK', 'date': '07/01/2012'},
   {'address': '5148 N CLARK', 'date': '07/04/2012'},
   {'address': '5800 E 58TH', 'date': '07/02/2012'},
   {'address': '2122 N CLARK', 'date': '07/03/2012'},
   {'address': '5645 N RAVENSWOOD', 'date': '07/02/2012'},
   {'address': '1060 W ADDISON', 'date': '07/02/2012'},
   {'address': '4801 N BROADWAY', 'date': '07/01/2012'},
   {'address': '1039 W GRANVILLE', 'date': '07/04/2012'},
]
rows.sort(key=itemgetter('date'))
for date, items in groupby(rows, key=itemgetter('date')):


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.16 è¿‡æ»¤åºåˆ—å…ƒç´  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ ¹æ®æ¡ä»¶ä»åºåˆ—ä¸­æå–å…ƒç´ 
â­ æ ¸å¿ƒæŠ€æœ¯ : 
 - åˆ—è¡¨æ¨å¯¼ï¼š[x for x in seq if condition]
 - ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼š(x for x in seq if condition) - çœå†…å­˜
 - filter(func, seq) - å¤æ‚æ¡ä»¶è¿‡æ»¤
 - itertools.compress(data, selectors) - æ ¹æ®å¸ƒå°”åºåˆ—è¿‡æ»¤
â­ é«˜çº§æŠ€å·§ : æ¡ä»¶è¡¨è¾¾å¼æ›¿æ¢ä¸ç¬¦åˆæ¡ä»¶çš„å€¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
# filter() - å¤æ‚æ¡ä»¶
values = ['1', '2', '-3', '-', '4', 'N/A', '5']
def is_int(val):
   try:
       int(val)
       return True
   except ValueError:
       return False

ivals = list(filter(is_int, values))  # ['1', '2', '-3', '4', '5']

# compress() - æ ¹æ®å¦ä¸€ä¸ªåºåˆ—è¿‡æ»¤
from itertools import compress
addresses = ['5412 N CLARK', '5148 N CLARK', '5800 E 58TH', '2122 N CLARK']
counts = [0, 3, 10, 4]
more5 = [n > 5 for n in counts]  # [False, False, True, False]
result = list(compress(addresses, more5))  # ['5800 E 58TH']


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.17 ä»å­—å…¸ä¸­æå–å­é›† â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : æ ¹æ®æ¡ä»¶ä»å­—å…¸ä¸­æå–éƒ¨åˆ†é”®å€¼å¯¹ï¼Œæ„é€ æ–°å­—å…¸
â­ æ ¸å¿ƒæŠ€æœ¯ : 
- å­—å…¸æ¨å¯¼ï¼š{k:v for k,v in dict.items() if condition}
- é”®é›†åˆæ“ä½œï¼šdict.keys() & set è·å–äº¤é›†
- dict()æ„é€ å‡½æ•°ï¼šdict((k,v) for k,v in items if condition)
â­ æ€§èƒ½å¯¹æ¯” : å­—å…¸æ¨å¯¼ > dict()å‡½æ•°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
prices = {'ACME': 45.23, 'AAPL': 612.78, 'IBM': 205.55, 'HPQ': 37.20, 'FB': 10.75}

# 1. æŒ‰å€¼è¿‡æ»¤ - ä»·æ ¼ > 200
p1 = {k: v for k, v in prices.items() if v > 200}  
# 2. æŒ‰é”®è¿‡æ»¤ - åœ¨æŒ‡å®šé›†åˆä¸­
tech_names = {'AAPL', 'IBM', 'HPQ', 'MSFT'}
p2 = {k: v for k, v in prices.items() if k in tech_names}
# 3. é”®é›†åˆæ“ä½œæ–¹å¼ï¼ˆæ›´ä¼˜é›…ï¼‰
p3 = {k: prices[k] for k in prices.keys() & tech_names}
# 4. å¤šæ¡ä»¶è¿‡æ»¤
p4 = {k: v for k, v in prices.items() if v > 50 and k.startswith('A')}


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.18 æ˜ å°„åç§°åˆ°åºåˆ—å…ƒç´  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : é€šè¿‡åç§°è€Œéä¸‹æ ‡è®¿é—®åºåˆ—å…ƒç´ ï¼Œæé«˜ä»£ç å¯è¯»æ€§
â­ æ ¸å¿ƒæŠ€æœ¯ : 
 - namedtuple('ç±»å', ['å­—æ®µ1', 'å­—æ®µ2'])ï¼šåˆ›å»ºå…·åå…ƒç»„ç±»
 - å®ä¾‹._replace(**kwargs)ï¼šåˆ›å»ºä¿®æ”¹åçš„æ–°å®ä¾‹ï¼ˆä¸å¯å˜ï¼‰
 - å…¼å®¹å…ƒç»„ï¼šæ”¯æŒç´¢å¼•ã€è§£åŒ…ã€len()ç­‰æ“ä½œ
â­ ä¼˜åŠ¿     : æ¯”å­—å…¸çœå†…å­˜ï¼Œæ¯”å…ƒç»„å¯è¯»æ€§é«˜ï¼Œé€‚åˆåªè¯»æ•°æ®ç»“æ„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
Stock = namedtuple('Stock', ['name', 'shares', 'price'])
s = Stock('ACME', 100, 123.45)
# æ›´æ–°å­—æ®µï¼ˆè¿”å›æ–°å®ä¾‹ï¼‰
s = s._replace(shares=75)

# ç¼ºå¤±å­—æ®µå¤„ç† - åŸå‹æ¨¡å¼
Stock = namedtuple('Stock', ['name', 'shares', 'price', 'date', 'time'])
# Create a prototype instance
stock_prototype = Stock('', 0, 0.0, None, None)
# Function to convert a dictionary to a Stock
def dict_to_stock(s):
    return stock_prototype._replace(**s)
   
a = {'name': 'ACME', 'shares': 100, 'price': 123.45}
dict_to_stock(a)  # Stock(name='ACME', shares=100, price=123.45, date=None, time=None)


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.19 è½¬æ¢å¹¶åŒæ—¶è®¡ç®—æ•°æ® â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : åœ¨èšé›†å‡½æ•°ä¸­åŒæ—¶è¿›è¡Œæ•°æ®è½¬æ¢æˆ–è¿‡æ»¤
â­ æ ¸å¿ƒæŠ€æœ¯ : 
- ç”Ÿæˆå™¨è¡¨è¾¾å¼ä½œå‚æ•°
- é¿å…åˆ›å»ºä¸´æ—¶åˆ—è¡¨ï¼šç”Ÿæˆå™¨è¿­ä»£å¤„ç†ï¼ŒèŠ‚çœå†…å­˜
- é…åˆany()/all()/min()/max()ç­‰èšé›†å‡½æ•°ä½¿ç”¨
â­ æ€§èƒ½ä¼˜åŠ¿ : ä¸åˆ›å»ºä¸­é—´åˆ—è¡¨ï¼Œé€‚åˆå¤§æ•°æ®é›†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
# è¿‡æ»¤å¹¶åˆ¤æ–­ - æ˜¯å¦å­˜åœ¨.pyæ–‡ä»¶
files = os.listdir('dirname')
if any(name.endswith('.py') for name in files):
   print('There be python!')

# æå–å¹¶èšé›† - æœ€å°è‚¡ä»½æ•°
portfolio = [
   {'name':'GOOG', 'shares': 50},
   {'name':'YHOO', 'shares': 75},
   {'name':'AOL', 'shares': 20},
   {'name':'SCOX', 'shares': 65}
]
min_shares = min(s['shares'] for s in portfolio)
min_item = min(portfolio, key=lambda s: s['shares'])  


"""
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1.20 åˆå¹¶å¤šä¸ªå­—å…¸æˆ–æ˜ å°„ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ é—®é¢˜     : é€»è¾‘ä¸Šåˆå¹¶å¤šä¸ªå­—å…¸ï¼Œæ‰§è¡ŒæŸ¥æ‰¾ç­‰æ“ä½œ
â­ æ ¸å¿ƒæŠ€æœ¯ : 
- ChainMap(dict1, dict2, ...)ï¼šåˆ›å»ºå­—å…¸é“¾è§†å›¾
- æŸ¥æ‰¾é¡ºåºï¼šä»å·¦åˆ°å³ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å€¼
- ä¿®æ”¹æ“ä½œï¼šåªå½±å“ç¬¬ä¸€ä¸ªå­—å…¸
- new_child()/parentsï¼šåˆ›å»º/ç§»é™¤ä½œç”¨åŸŸå±‚çº§
â­ ä¼˜åŠ¿     : ä¸åˆ›å»ºæ–°å­—å…¸ï¼ŒåŸå­—å…¸ä¿®æ”¹å®æ—¶åæ˜ 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"""
a = {'x': 1, 'z': 3}
b = {'y': 2, 'z': 4}
c = ChainMap(a, b)
c['z']  # 3 (from a, not b)

values = ChainMap()
values['x'] = 1
values = values.new_child()  # æ–°ä½œç”¨åŸŸ
values['x'] = 2
values = values.new_child()  # å†æ–°ä½œç”¨åŸŸ
values['x'] = 3
# ChainMap({'x': 3}, {'x': 2}, {'x': 1})
values = values.parents  # é€€å‡ºä½œç”¨åŸŸ
# values['x'] = 2

# 4. å¯¹æ¯”update() - ChainMapæ˜¯è§†å›¾ï¼Œä¸æ˜¯æ‹·è´
# update(): åˆ›å»ºæ•°æ®çš„å‰¯æœ¬ï¼Œä¹‹åç›¸äº’ç‹¬ç«‹
# ChainMap: åˆ›å»ºè§†å›¾/å¼•ç”¨ï¼Œå§‹ç»ˆåæ˜ åŸå­—å…¸çš„æœ€æ–°çŠ¶æ€
merged = dict(b)
merged.update(a)
a['x'] = 42 # merged['x'] ä»æ˜¯ 1
